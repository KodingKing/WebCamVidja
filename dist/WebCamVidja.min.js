var wcvj=window.wcvj||{};wcvj.videoIsSupported=function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},function(e){"use strict";var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.oGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,n=window.webkitURL||window.mozURL||window.msURL||window.URL,r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();e.webcam=function(e,i){i=typeof i!="undefined"?i:{},i.canvas=typeof i.canvas!="undefined"?i.canvas:!1,i.draw=typeof i.draw!="undefined"?i.draw:!1,i.autoplay=typeof i.autoplay!="undefined"?i.autoplay:!0;var s=function(){var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))};window.fx!==undefined&&s()?i.glfx=typeof i.glfx!==undefined?i.glfx:!1:i.glfx=!1;var o,u,a,f,l,c;c=[],o=document.getElementById(e),o===null?(o=document.createElement("video"),o.id=e,o.autoplay=i.autoplay,o.innerHTML="Your browser does not support video"):o.autoplay=i.autoplay,i.glfx&&s()?u=fx.canvas():i.canvas&&(u=document.createElement("canvas"),a=u.getContext("2d"),f=u.getContext("webgl")||u.getContext("experimental-webgl"),u.innerHTML="Your browser does not support canvas");var h=function(){a.drawImage(o,0,0)};i.draw||(i.draw=h);var p=function(){if(i.glfx){l.loadContentsOf(o),u.draw(l);for(var e=0;e<c.length;e++)u[c[e][0]].apply(u,c[e][1]);u.update()}else i.draw.apply(u,[a,f,o]);r(p)},d=function(e){i.canvas&&(i.draw=e,a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,u.width,u.height),a.restore())},v=function(e){c=e},m=function(){i.glfx&&u.update()},g=function(){i.glfx&&(l=u.texture(o));if(i.canvas||i.glfx)u.width=o.videoWidth,u.height=o.videoHeight,p()};return o.addEventListener("canplay",g,!1),t.call(navigator,{video:!0,audio:!1},function(e){o.mozSrcObject!==undefined?o.mozSrcObject=e:navigator.mozGetUserMedia?o.src=e:n?o.src=n.createObjectURL(e):o.src=e},function(){}),{video:o,canvas:u,setDraw:d,setFilter:v,update:m}}}(window.wcvj);