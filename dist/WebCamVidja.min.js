/*!  - v - 2013-11-16\n* Copyright (c) 2013 ; Licensed  */var wcvj=window.wcvj||{};wcvj.videoIsSupported=function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},wcvj.webglIsSupported=function(){var a=document.createElement("canvas");return!(!window.WebGLRenderingContext||!a.getContext("webgl")&&!a.getContext("experimental-webgl"))},function(a){"use strict";var b=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.oGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,c=window.webkitURL||window.mozURL||window.msURL||window.URL,d=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();a.webcam=function(e,f){f="undefined"!=typeof f?f:{},f.canvas="undefined"!=typeof f.canvas?f.canvas:!1,f.draw="undefined"!=typeof f.draw?f.draw:!1,f.autoplay="undefined"!=typeof f.autoplay?f.autoplay:!0;f.glfx=void 0!==window.fx&&a.webglIsSupported()?void 0!==typeof f.glfx?f.glfx:!1:!1;var g,h,i,j,k,l;l=[],g=document.getElementById(e),null===g?(g=document.createElement("video"),g.id=e,g.autoplay=f.autoplay,g.innerHTML="Your browser does not support video"):g.autoplay=f.autoplay,f.glfx&&a.webglIsSupported()?h=fx.canvas():f.canvas&&(h=document.createElement("canvas"),i=h.getContext("2d"),j=h.getContext("webgl")||h.getContext("experimental-webgl"),h.innerHTML="Your browser does not support canvas");var m=function(){i.drawImage(g,0,0)};f.draw||(f.draw=m);var n=function(){if(f.glfx){k.loadContentsOf(g),h.draw(k);for(var a=0;a<l.length;a++)h[l[a][0]].apply(h,l[a][1]);h.update()}else f.draw.apply(h,[i,j,g]);d(n)},o=function(a){f.canvas&&(f.draw=a,i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,h.width,h.height),i.restore())},p=function(a){l=a},q=function(){f.glfx&&h.update()},r=function(){f.glfx&&setTimeout(function(){k=h.texture(g),n()},500),(f.canvas||f.glfx)&&(h.width=g.videoWidth,h.height=g.videoHeight)};return g.addEventListener("canplay",r,!1),b.call(navigator,{video:!0,audio:!1},function(a){void 0!==g.mozSrcObject?g.mozSrcObject=a:g.src=navigator.mozGetUserMedia?a:c?c.createObjectURL(a):a},function(a){var b=document.createEvent("Event");b.initEvent("UserMediaError",!0,!0),b.UserMediaError=a,g.dispatchEvent(b)}),{video:g,canvas:h,setDraw:o,setFilter:p,update:q}}}(window.wcvj);