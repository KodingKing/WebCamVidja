var wcvj=window.wcvj||{};wcvj.videoIsSupported=function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},function(e){"use strict";var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.oGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,n=window.webkitURL||window.mozURL||window.msURL||window.URL,r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();e.webcam=function(e,i){i=typeof i!="undefined"?i:{},i.canvas=typeof i.canvas!="undefined"?i.canvas:!1,i.draw=typeof i.draw!="undefined"?i.draw:!1,i.autoPlay=typeof i.autoPlay!="undefined"?i.autoPlay:!0;var s=function(){var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))};window.fx!=="undefined"&&s()?i.glfx=typeof i.glfx!="undefined"?i.glfx:!1:i.glfx=!1;var o,u,a,f,l;l=[],o=document.getElementById(e),o===null&&(o=document.createElement("video"),o.id=e,o.setAttribute("autoplay",i.autoPlay),o.innerHTML="Your browser does not support video"),i.glfx&&s()?u=fx.canvas():i.canvas&&(u=document.createElement("canvas"),a=u.getContext("2d"),u.innerHTML="Your browser does not support canvas");var c=function(){a.drawImage(o,0,0)};i.draw||(i.draw=c);var h=function(){if(i.glfx){f.loadContentsOf(o),u.draw(f);for(var e=0;e<l.length;e++)u[l[e][0]].apply(u,l[e][1]);u.update()}else i.draw.apply(u,[o]);r(h)},p=function(e){i.draw=e},d=function(e){l=e},v=function(){i.glfx&&u.update()},m=function(){i.glfx&&(f=u.texture(o));if(i.canvas||i.glfx)u.width=o.videoWidth,u.height=o.videoHeight,h()};return o.addEventListener("canplay",m,!1),t.call(navigator,{video:!0,audio:!1},function(e){o.mozSrcObject!==undefined?o.mozSrcObject=e:navigator.mozGetUserMedia?o.src=e:n?o.src=n.createObjectURL(e):o.src=e},function(){}),{video:o,canvas:u,setDraw:p,setFilter:d,update:v}}}(window.wcvj);