var wcvj=window.wcvj||{};wcvj.videoIsSupported=function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},wcvj.webglIsSupported=function(){var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))},function(e){"use strict";var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.oGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,n=window.webkitURL||window.mozURL||window.msURL||window.URL,r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();e.webcam=function(i,s){s=typeof s!="undefined"?s:{},s.canvas=typeof s.canvas!="undefined"?s.canvas:!1,s.draw=typeof s.draw!="undefined"?s.draw:!1,s.autoplay=typeof s.autoplay!="undefined"?s.autoplay:!0;var o=function(){var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))};window.fx!==undefined&&e.webglIsSupported()?s.glfx=typeof s.glfx!==undefined?s.glfx:!1:s.glfx=!1;var u,a,f,l,c,h;h=[],u=document.getElementById(i),u===null?(u=document.createElement("video"),u.id=i,u.autoplay=s.autoplay,u.innerHTML="Your browser does not support video"):u.autoplay=s.autoplay,s.glfx&&e.webglIsSupported()?a=fx.canvas():s.canvas&&(a=document.createElement("canvas"),f=a.getContext("2d"),l=a.getContext("webgl")||a.getContext("experimental-webgl"),a.innerHTML="Your browser does not support canvas");var p=function(){f.drawImage(u,0,0)};s.draw||(s.draw=p);var d=function(){if(s.glfx){c.loadContentsOf(u),a.draw(c);for(var e=0;e<h.length;e++)a[h[e][0]].apply(a,h[e][1]);a.update()}else s.draw.apply(a,[f,l,u]);r(d)},v=function(e){s.canvas&&(s.draw=e,f.save(),f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,a.width,a.height),f.restore())},m=function(e){h=e},g=function(){s.glfx&&a.update()},y=function(){s.glfx&&(c=a.texture(u));if(s.canvas||s.glfx)a.width=u.videoWidth,a.height=u.videoHeight,d()};return u.addEventListener("canplay",y,!1),t.call(navigator,{video:!0,audio:!1},function(e){u.mozSrcObject!==undefined?u.mozSrcObject=e:navigator.mozGetUserMedia?u.src=e:n?u.src=n.createObjectURL(e):u.src=e},function(e){var t=document.createEvent("Event");t.initEvent("UserMediaError",!0,!0),t.UserMediaError=e,u.dispatchEvent(t)}),{video:u,canvas:a,setDraw:v,setFilter:m,update:g}}}(window.wcvj);